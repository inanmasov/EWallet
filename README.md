# Тестовое задание для стажера на позицию «Go-разработчик»
Разработано приложение EWallet реализующее систему обработки транзакций платёжной системы. Приложение представляет из себя HTTP сервер, реализующий REST API. У сервера есть 4 метода и их логика.
База данных - Postgres (PostgreSQL). Поддерживается персистентность - данные и изменения не "теряются" при перезапуске приложения.
## Запуск в Docker
Команда для сборки и запуска из директории приложения:
```bash
docker-compose up --build infotecs
```
Скрипт wait-for-postgres.sh не даёт запуститься серверу до запуска базы данных.
Сервер слушает на 8000 порту (localhost).
## Создание кошелька
```bash
curl -X POST http://localhost:8000/api/v1/wallet
```
При отправке данного запроса создается кошелек. Ответ содержит JSON-объект с состоянием созданного кошелька, а именно id и balance.
## Перевод средств с одного кошелька на другой
```bash
curl -X POST -d "{\"to\":\"1\",\"amount\":50}" http://localhost:8000/api/v1/wallet/2/send
```
Данный запрос переводит с одного кошелька на другой (со 2 на 1). Статус ответа 200 если перевод успешен, 404 если исходящий кошелек не найден, 400 если целевой кошелек не найден или на исходящем нет нужной суммы.
## Получение историй входящих и исходящих транзакций
```bash
curl -X GET http://localhost:8000/api/v1/wallet/2/history
```
Данный запрос выводит историю входящих и исходящих транзакций. Ответ с статусом 200 если кошелек найден, 404 если указанный кошелек не найден. Ответ содержит в теле массив JSON-объектов с входящими и исходящими транзакциями кошелька.
## Получение текущего состояния кошелька
```bash
curl -X GET http://localhost:8000/api/v1/wallet/2
```
Данный запрос выводит текущее состояния кошелька. Ответ с статусом 200 если кошелек найден, 404 если кошелек не найден. Ответ содержит в теле JSON-объект с текущим состоянием кошелька, а именно id и balance.
## База данных
При сборке, таблицы импортируются из папки init-scripts. "Идёт" использование функциональности docker-entrypoint-initdb.d. Эта директория в контейнере PostgreSQL предназначена для скриптов инициализации базы данных.

./.database/postgres/data - по этому пути от корневого каталога проекта будет располагаться том для хранения данных Postgres (персистентность).
